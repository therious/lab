import React from 'react';

// Import build info generated at build time
// This file is generated by scripts/generate-build-info.js during build
import buildInfoJson from '../build-info.json';

interface BuildInfoData {
  commitHash: string;
  branch: string;
  authorDate: string;
  commitDate: string;
  buildDate: string;
}

interface BuildInfoProps {
  serverCommitHash?: string | null;
  className?: string;
  style?: React.CSSProperties;
}

/**
 * BuildInfo component displays build information (commit hash, branch, dates)
 * 
 * This component is designed to be reusable across all applications.
 * For applications without servers, only the UI build info will be displayed.
 * 
 * Styled to match UserProfile widget: same padding, background, border-radius, border
 * 
 * @param serverCommitHash - Optional server commit hash to display alongside UI hash
 * @param className - Optional CSS class name
 * @param style - Optional inline styles
 */
export function BuildInfo({ serverCommitHash, className, style }: BuildInfoProps) {
  const uiBuildInfo: BuildInfoData = buildInfoJson as BuildInfoData;
  
  // Match UserProfile styling: padding: 0.5rem 1rem, background: #f8f9fa, border-radius: 8px, border: 1px solid #dee2e6
  const defaultStyle: React.CSSProperties = {
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'flex-start',
    gap: '0.25rem',
    padding: '0.5rem 1rem',
    background: '#f8f9fa',
    borderRadius: '8px',
    border: '1px solid #dee2e6',
    fontSize: '10px',
    color: '#666',
    fontFamily: 'monospace',
    lineHeight: '1.2',
    ...style
  };
  
  return (
    <div className={className} style={defaultStyle}>
      {serverCommitHash && (
        <div>Server: {serverCommitHash}</div>
      )}
      <div>UI: {uiBuildInfo.commitHash}</div>
    </div>
  );
}
